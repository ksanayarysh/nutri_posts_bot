from __future__ import annotations
import random
from datetime import datetime

DEFAULT_RUBRICS = [
    "Миф/правда",
    "Практический совет",
    "Разбор ошибки",
    "Мини-гайд",
    "Ответ на вопрос",
]

DEFAULT_TOPICS = [
    # Базовые темы
    "Миф и правда про белок",
    "Почему люди переедают на «правильной еде»",
    "Клетчатка: зачем, сколько, где взять без фруктов и хлеба",
    "Инсулинорезистентность: что реально влияет каждый день",
    "Соль и вода: почему отеки не всегда про соль",
    "Сон и аппетит: как недосып ломает контроль еды",
    "Голод vs тяга: как отличать на практике",
    "Что делать, если живот вздулся: частые причины в рационе",
    "Как собрать тарелку: простой шаблон без фанатизма",
    "Почему «детокс» не нужен и что делать вместо него",
    "Алкоголь и питание: где реальные потери, а где мифы",
    "Как читать этикетку: 3 вещи, которые важнее маркетинга",

    # Женщины 40+
    "Почему жир с живота не уходит даже при дефиците калорий",
    "Кортизол после 40: как стресс удерживает жир",
    "Инсулинорезистентность у женщин 40+: симптомы, которые часто игнорируют",
    "Почему питание «как раньше» перестает работать после 40",
    "Эстроген и жир: почему фигура меняется без набора веса",
    "Вздутие или жир: как отличить по ощущениям и внешнему виду",
    "Почему кардио перестает помогать худеть после 40",
    "Белок после 40: сколько действительно нужно",
    "Почему диеты усиливают тягу к сладкому после 40",
    "Сон и талия: как недосып напрямую влияет на живот",
    "Метаболизм после 40: что правда, а что миф",
    "Почему вес стоит, а объемы растут",
    "Алкоголь после 40: почему он сильнее влияет на фигуру",
    "Скрытые углеводы: откуда они берутся, если «я их не ем»",
    "Почему тренировки без силовых ухудшают форму после 40",
    "Гормональные качели и аппетит: когда голод не про еду",
    "Запоры после 40 и живот: неочевидная связь",
    "Почему вес не снижается, даже если питание стало лучше",
    "Хроническое воспаление и лишний жир: как это выглядит в жизни",
    "Почему стратегия «есть меньше» перестает работать после 40",
]


def pick_daily(
    seed_date: str | None = None,
    rubrics: list[str] | None = None,
    topics: list[str] | None = None,
) -> tuple[str, str]:
    """
    Deterministic daily pick:
    один и тот же день → одна и та же тема,
    чтобы при перезапуске не менялся пост.
    """
    rubrics = rubrics or DEFAULT_RUBRICS
    topics = topics or DEFAULT_TOPICS

    day = seed_date or datetime.now().strftime("%Y-%m-%d")
    rng = random.Random(day)
    return rng.choice(rubrics), rng.choice(topics)
